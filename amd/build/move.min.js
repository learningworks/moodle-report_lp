define(["jquery","core/sortable_list","core/ajax","core/templates","core/notification","core/log"],function(a,b,c,d,e,f){var g=function(d,g){f.debug("Loaded");var h=new b("#"+d);h.getElementName=function(b){return a.Deferred().resolve(b.attr("data-name"))};var i;a("#"+d+" .draggable").on(b.EVENTS.DRAGSTART,function(b,c){i=c.sourceList.children().index(c.element),setTimeout(function(){a(".sortable-list-is-dragged").width(c.element.width())},501)}).on(b.EVENTS.DROP,function(a,b){var d,f,h=this,j=b.targetList.children().index(b.element),k=b.element.find("[data-action="+g+"]");if(b.positionChanged&&k.length){d=k.closest("ul"),f=k.closest("li"),f.removeClass("depth-1 depth-2 depth-3");var l={methodname:"report_lp_report_configuration_move_item",args:{courseid:d.attr("data-course-id"),itemid:f.attr("data-item-id"),position:j,moveby:j-i,total:k.length}},m=c.call([l])[0];m.done(function(a){h.data=a}).fail(e.exception),f.addClass("depth-"+h.data.depth)}})};return{init:g}});