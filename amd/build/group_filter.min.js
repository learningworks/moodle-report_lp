define(["jquery","core/custom_interaction_events","core/ajax","core/notification","core/str","core/log"],function(t,e,i,n,a,r){var o="[data-active-menu]",c="[data-filter]",d="data-group-id",l="[data-active-text]";return{init:function(a){r.debug("Initialising filter "+a),function(a){e.define(a,[e.events.activate]),a.on(e.events.activate,c,function(e,a){var c=this,s=[],u=[],g=t(e.target),f=g.closest(o);if(g.hasClass("dropdown-item")){g.toggleClass("active"),g.find("div.checked").toggleClass("d-none");var v=f.find(".active");v.length&&v.each(function(t,e){var i=e.getAttribute(d);u.push(i);var n=e.innerText;s.push(n)});var p=f.parent().find('[data-toggle="dropdown"]').find(l);p.length&&(s.length?p.html(s.join(", ")):p.html("Filter groups")),r.debug(u.join());var h={methodname:"report_lp_set_group_filter",args:{courseid:f.attr("data-course-id"),groupids:u.join()}};i.call([h])[0].done(function(t){c.response=t,window.location.replace(f.attr("data-redirect-url"))}).fail(n.exception),a.originalEvent.preventDefault()}})}(a=t(a))}}});